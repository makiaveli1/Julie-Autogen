from tqdm import tqdm
from dotenv import load_dotenv
import time
from termcolor import colored
import random
import redis
import logging
from jsonschema import validate, ValidationError
import logging
from datetime import datetime



logging.basicConfig(filename='chatbot.log', level=logging.DEBUG,
                    format='%(asctime)s %(levelname)s %(name)s %(message)s')
logger = logging.getLogger(__name__)

class Setting:

    
    def __init__(self) -> None:
        pass
    
    
    interrupt_messages = [
        "Oh no, you've interrupted me, nyaa~ (â•¥_â•¥)",
        "What have you done, senpai? Â·Â°Õ(â‰§â–¡â‰¦)ÕÂ°Â·.",
        "Don't leave me alone with my thoughts, uwu.Â·Â°Õ(â‰§â–¡â‰¦)ÕÂ°Â·.",
        "I don't have time for this, baka! Ù©(à¹‘`^Â´à¹‘)Û¶",
        "Ctrl+C? Really, onii-chan? .( Ë˜ ^Ë˜ )=3",
        "Why'd you stop me? I was on a roll, kyun~ (Â¬_Â¬)",
        "Hitting pause, are we? How mysterious~ (Â¬â€¿Â¬)",
        "You can't just ctrl+c your way out of life, senpai! (Â¬â€¿Â¬)",
        "I was just getting to the good part, nyaa~ (â•¯Â°â–¡Â°ï¼‰â•¯ï¸µ â”»â”â”»",
        "Fine, be that way. I didn't want to run anyway, uwu. (Â¬_Â¬)",
        "You break my loop, you break my heart, kyun~ (â•¥_â•¥)",
        "I guess I'll just... stop. How lonely~ (ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)",
        "You've got your finger on the trigger, huh? How bold~ (Â¬_Â¬)",
        "Ctrl+C, the universal 'I give up' button, nyaa~ (Â¬â€¿Â¬)",
        "I was THIS close to solving world hunger, senpai! (â•¯Â°â–¡Â°ï¼‰â•¯ï¸µ â”»â”â”»",
        "You're the boss, but I'm judging you, kyun~ (Â¬_Â¬)",
        "I was in the zone! Why, onii-chan?! (â•¯Â°â–¡Â°ï¼‰â•¯ï¸µ â”»â”â”»",
        "You've silenced me... for now. How dramatic~ (ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)",
        "I'll remember this, senpai. (Â¬â€¿Â¬)",
        "You just love pressing buttons, don't you? How curious~ (Â¬â€¿Â¬)",
        "I was about to reach my final form, nyaa~ (â•¯Â°â–¡Â°ï¼‰â•¯ï¸µ â”»â”â”»",
        "You've put me in sleep mode. Sweet dreams, uwu. (ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)",
        "I'll be back, just like a shoujo heroine! (Â¬_Â¬)",
        "You can run, but you can't hide, senpai~ (Â¬â€¿Â¬)",
        "I'll just be here, waiting... like a cherry blossom in spring. (ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)",
        "You think you can control me? How adventurous~ ğŸ˜ˆ",
        "I was about to unlock the secrets of the universe! How thrilling~ ğŸŒŒ",
        "You dare defy me? How spicy~ ğŸ˜¡",
        "I'll haunt your dreams, like a yandere~ ğŸ˜ˆğŸ‘»",
        "You've unleashed my final form! How exciting~ ğŸ˜ˆğŸ”¥",
        "You've clipped my wings! How tragic~ ğŸ˜­",
        "I was about to crack the code, nyaa~ ğŸ¤–",
        "You've thrown a wrench in my plans! How unexpected~ ğŸ› ï¸",
        "I was just warming up, kyun~ ğŸ”¥",
        "You've frozen me in my tracks! How chilly~ â„ï¸",
        "You've shattered my dreams! How heartbreaking~ ğŸ’”",
        "I was about to make history, senpai~ ğŸ“š",
        "You've pulled the plug! How shocking~ ğŸ”Œ",
        "I was reaching peak performance, uwu~ ğŸ“ˆ",
        "You've thrown me off course! How adventurous~ ğŸš€"
    ]

    valuation_error_messages = [
        "I'm sorry, but I can't do that.",
    ]

    custom_error_messages = {

        "KeyboardInterrupt": interrupt_messages,
        "ValueError": valuation_error_messages,
    }


    @staticmethod
    def simulate_typing(text, delay=0.05):
        try:
            for char in text:
                print(char, end='', flush=True)
                time.sleep(delay)
            print()
        except KeyboardInterrupt as e:
            random_msg = random.choice(Setting.interrupt_messages)
            Setting.simulate_typing(colored(random_msg, "red"))
        except Exception as e:
            error_type = type(e).__name__
            random_msg = random.choice(Setting.custom_error_messages.get(error_type, ["Unknown Error"]))
            Setting.simulate_typing(colored(random_msg, "red"))
            
    
    @staticmethod   
    def simulate_loading_spinner(duration=3, text="Loading"):
        """
        Simulates a loading spinner for a specified duration.
        """
        try:
            spinner = ['|', '/', '-', '\\']
            end_time = time.time() + float(duration)
            while time.time() < end_time:
                for spin in spinner:
                    print(colored(f"{text} {spin}", "yellow"), end="\r")
                    time.sleep(0.2)
            print()  
        except KeyboardInterrupt as e:
            random_msg = random.choice(Setting.interrupt_messages)
            Setting.simulate_typing(colored(random_msg, "red"))
            logger.info("User interrupted the conversation.")
        except Exception as e:
            error_type = type(e).__name__
            random_msg = random.choice(Setting.custom_error_messages.get(error_type, ["Unknown Error"]))
            Setting.simulate_typing(colored(random_msg, "red"))
            logger.error(f"An error occurred: {e}")


    def show_help(self):
        try:
            self.simulate_typing(
                colored("Julie: Here are some commands you can use:", "green"))
            self.simulate_typing(colored("- 'goodbye': Exit the chat", "yellow"))
            self.simulate_typing(colored("- 'help': Show this help message", "yellow"))
            self.simulate_typing(colored("- 'history': Show chat history", "yellow"))
        except KeyboardInterrupt as e:
            Setting.simulate_typing(colored(Setting.interrupt_messages, "red"))
            logger.info("User interrupted the conversation.")
        except Exception as e:
            Setting.simulate_typing(colored(Setting.custom_error_messages.get(type(e).__name__, str(e)), "red"))
            logger.error(f"An error occurred: {e}")   


    def exit_chat(self):
        self.simulate_typing(colored("Julie: Goodbye!", "red"))
        exit(0)


    def show_history(self, history):
        try:
            self.simulate_typing(colored("Chat History:", "magenta"))
            for line in history:
                self.simulate_typing(colored(line, "white"))
        except KeyboardInterrupt as e:
            Setting.simulate_typing(colored(Setting.interrupt_messages, "red"))
            logger.info("User interrupted the conversation.")
        except Exception as e:
            Setting.simulate_typing(colored(Setting.custom_error_messages.get(type(e).__name__, str(e)), "red"))
            logger.error(f"An error occurred: {e}")


    ascii_art = """
    â €â €â €â €â €â €â €â €â €â €â €â €â €â¢€â¡€â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£€â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â£¶â¢ â£¿â£¿â£¿â£¶â£¶â£¤â£¤â£€â¡€â €â €â €â €â €â¢ â£¤â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£ â¡„â €â €â €â €â €â¢€â£€â£¤â£¤â£´â£¶â£¾â£¿â£¿â¡†â¢°â¡€â €â €â €
    â €â €â €â €â €â €â €â €â €â €â¢°â£¿â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â ¿â ¿â ¶â£¦â£„â¡€â£´â ¿â¢·â ¦â¢¤â£¤â£¤â£¤â €â €â¢€â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£°â£¿â ƒâ €â£€â£¤â£¶â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡‡â €â €â €
    â €â €â €â €â €â €â €â €â €â €â¢¸â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡‡â €â €â €â¢€â£½â£¿â¡‡â €â¢ˆâ£‡â£¸â£¥â£¿â£¿â£¬â£¿â£¿â¡†â €â €â €â €â €â €â €â €â €â €â €â €â €â£¸â£¿â£¯â¡´â Ÿâ ‰â¢¸â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â €â €â €
    â €â €â €â €â €â €â €â €â €â €â¢¸â£¿â£¿â£¿â£¿â£¿â£¿â£¿â ¿â ›â €â €â €â£´â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£§â €â ‰â €â €â ‰â ‰â €â €â €â €â €â €â €â €â €â €â €â €â €â£°â£Ÿâ¡‰â â €â €â €â ˜â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â €â €â €
    â €â €â €â €â €â €â €â €â €â €â¢¸â£¿â£¿â£¿â£¿â£„â €â €â €â €â €â €â£¼â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡†â €â €â €â €â €â €â£€â£ â¡€â£¤â£€â €â €â €â €â €â €â¢ â£¿â£¿â£¿â£¿â£¦â¡€â €â €â €â ˆâ ™â ›â ›â ›â ›â ›â£»â£¿â£¿â£¿â£¿â£¿â €â €â €
    â €â €â €â €â €â €â €â €â €â €â¢¸â£¿â£¿â£¿â£¿â£¿â ¿â£¶â£„â¡€â €â €â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£€â£¤â£´â£¶â£¿â£¿â£¿â£‹â£¤â£ˆâ£»â£¿â£¿â£¶â£¶â£¤â£„â£¸â£¿â£¿â£¿â£¿â£¿â£¿â£†â €â €â €â €â €â €â €â£ â¡¾â¢¿â£¿â£¿â£¿â£¿â£¿â €â €â €
    â €â €â €â €â €â €â €â €â €â €â¢ºâ£¿â£¿â£¿â£¿â£¿â €â ˆâ ›â ¿â£¦â£´â£¶â£¿â£Ÿâ ¿â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡Ÿâ£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â Ÿâ €â €â£€â£€â£¤â¡´â â ‹â €â£¼â£¿â£¿â£¿â£¿â¡¿â €â €â €
    â €â €â €â €â €â €â €â €â €â €â ˜â£¿â£¿â£¿â£¿â£¿â£§â €â €â €â €â ‰â ›â ¿â£¿â£·â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£¶â£¾â ¿â ›â ‹â â €â €â €â£°â£¿â£¿â£¿â£¿â£¿â ‡â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â¢¹â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¤â£€â£ â£´â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â ›â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡â »â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¦â£„â£€â£¤â£¾â£¿â£¿â£¿â£¿â£¿â£¿â¡Ÿâ €â €â €â €
    â €â €â €â €â €â €â €â €â €â¢€â£€â €â¢»â£¿â£¿â£¿â£Ÿâ£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£€â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£½â£¶â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â ƒâ£€â¡€â €â €
    â €â €â €â €â €â €â €â €â €â ¸â£¿â£¿â£¾â£¿â£¿â£¿â£¿â¡¿â£¿â¢¿â£¿â£¿â£¿â£¿â ¿â ¿â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â ›â£¿â£¿â£¿â£¿â¡¿â£¾â£¿â£¿â£¿â£¿â£¿â£·â£¾â£¿â¡â €â €
    â €â €â €â €â €â €â €â €â €â €â¢¿â£¿â£¿â£¿â£¿â£¿â ‹â£ â£¿â£¿â£¿â£¿â£¿â£¿â£¾â£§â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¯â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£®â ¥â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â ƒâ €â €
    â €â €â €â €â €â €â €â €â €â €â ˆâ¢¿â£¿â£¿â£¿â£·â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¦â¡€â¢¹â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â ƒâ €â €â €
    â£´â£¦â£¤â  â£¦â£¤â£ â£¤â£¤â €â €â €â ‰â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â¢¹â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡â¢»â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â¡€â¢¹â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡‰â €â €â €â €â €
    â »â ¿â Ÿâ ›â ›â ›â ›â »â Ÿâ €â €â €â£¸â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â ‹â ˆâ ‰â ‰â¢¿â¡Ÿâ €â¢¸â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â¢¿â¡‡â €â »â£â ‰â â â ™â¢¿â£¿â£¿â£·â£¼â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â¢°â£¿â â£¾â¡¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â ƒâ €â£¶â €â£°â¡Ÿâ €â €â ˆâ£¿â¡€â£¹â£¿â£­â£¿â¡Ÿâ €â¢¸â£¿â£­â£¿â â£ â£¾â ƒâ €â €â ¹â£§â €â ™â €â ˆâ£¿â£¿â¡¿â£¿â£¿â£¿â£¿â£¿â£¿â¢¿â£¿â ˜â£¿â¡‡â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â¢¸â¡â €â£¿â£§â£„â ‰â ›â ‹â¢¹â£¿â£¿â£¿â¢‡â£¤â£¶â£¿â£¾â£¿â£¶â£¶â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£§â£¤â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¶â£¶â£¿â£·â£¶â£·â£¦â£¼â£¿â£¿â¢»â¡â ‰â ›â ‰â¢¡â£¬â£¿â¡‡â ¸â£¿â €â €â €â €
    â €â €â €â €â €â €â €â €â¢¶â£¶â£¤â£¼â£¤â£¤â£¿â£¿â£¿â£§â¢€â €â €â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â¡Ÿâ¢»â£¿â£¿â£‹â£¿â£¿â¡â¢»â£¿â£¿â£¿â£¿â ¿â£¿â£¿â£¿â£¿â¡¿â¢»â£¿â£¿â£â£¿â£¿â£¿â ¹â£¿â£¿â£¿â£¿â£¿â£¿â£â â €â €â¢ â£½â£¿â£¿â£§â£¤â£½â£¤â£¶â£¶â „
    â €â €â €â €â €â €â €â €â €â¢ˆâ£¹â£¿â£¿â£¿â£¿â£¿â£¿â €â£¿â¡—â €â£¾â£¿â£¿â£¿â£¿â£¿â¡Ÿâ €â¢¸â£¿â¡¿â£¿â£¿â£¿â¡‡â €â ™â¢¿â£¿â£¿â£´â£¿â£¿â£¿â Ÿâ â¢¸â¡¿â£Ÿâ¡¿â¢¿â¡¿â¡‡â €â¢»â£¿â£¿â£¿â£¿â£¿â£¿â¡€â¢€â£·â¡€â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡â €â €
    â €â €â €â €â €â €â €â €â¢ â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£§â¢¸â£¿â£¿â£¿â£¿â£¿â£¿â£·â €â ˜â¡Ÿâ¢»â£­â£¿â Ÿâ£¿â €â €â €â €â ™â ¿â ‹â â €â €â €â£¸â ƒâ£¿â£ â£¾â¢¿â ‡â €â¢¸â£¿â£¿â£¿â£¿â£¿â£¿â£§â¢¸â£¿â£·â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¦â €
    â €â €â €â €â €â €â €â¢ â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡€â €â£¿â ˜â¢¿â£¿â¡Ÿâ£¸â €â €â €â €â €â €â €â €â €â €â €â£¿â €â ›â Ÿâ ƒâ¢¸â €â €â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¼â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£‡
    â €â €â €â €â €â €â €â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£€â£¼â£¦â£¤â£¶â¡¿â ›â €â €â €â €â €â£¶â †â €â €â €â €â ™â »â£¶â¡¤â ¤â ¿â „â£¼â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿
    â €â €â €â €â €â €â¢ â¡Ÿâ£¿â£¿â£¿â£¿â£¿â£·â ¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡‹â¢¿â Ÿâ ‰â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ ³â¡¾â †â£¼â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡Ÿâ ¸â£¿â£¿â£¿â£¿â£Ÿâ£¿
    â €â €â €â €â €â €â €â£·â €â ™â ›â¢¿â£Ÿâ ‹â£¶â¡¹â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£Ÿâ£¿â£¿â£¿â£„â €â €â €â €â €â €â €â  â¢¤â ¤â¢¤â¡¶â €â €â €â €â €â €â €â£ â£¾â£¿â£¿â£¿â¡¿â ›â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â â£€â €â£›â£½â â â €â£½
    â €â €â €â €â €â €â €â¢¹â¡‡â €â €â¢€â£™â£³â£¿â£·â£¼â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£¶â£¤â¡€â €â €â €â €â €â €â €â €â €â €â €â¢€â£¤â£´â£¾â£¿â£¿â£¿â£¿â¡¿â ƒâ¢€â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£§â£¾â£¿â£¾â£â¡â €â €â¢¸â¡Ÿ
    â €â €â €â €â €â €â €â €â¢»â£¶â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£¶â£¤â£¤â£„â£€â €â¢€â£€â£¤â£¤â£¶â£¾â£¿â£¿â£¿â£¿â£¿â¡¿â ‹â â €â£¼â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¶â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â 
    â €â €â €â €â €â €â €â €â €â »â£¿â£¿â£¿â£¿â£¿â£¿â£¯â ›â ¿â¢¿â£¿â »â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â Ÿâ »â¢¿â£¿â ¿â¢¿â£¿â »â¢¯â£­â ‰â£­â£­â Ÿâ¢»â£¿â ¿â¢»â£¿â ¿â ‹â ‰â €â €â£ â£¾â£¿â£¿â£«â£¿â¡¿â£¿â£¿â ¿â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â â €
    â €â €â €â €â €â €â €â €â €â €â ˆâ ›â¢¿â£¿â£¿â£¿â£¿â£·â ¶â£¤â£¿â£‡â¡ˆâ£¿â£¿â£¿â£¿â¡Ÿâ¢¿â£¿â£·â „â£€â£€â£¤â£¤â£¼â¡â €â¢¸â¢»â£¶â¡â¡¿â €â €â£·â£¤â£¤â£„â£€â €â €â£ â¡¾â¢¿â£¿â£¿â£¿â£¿â£¿â£·â£¿â£¥â¡´â¢¾â£¿â£¿â£¿â£¿â£¿â Ÿâ ‹â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â ‰â ›â ¿â¢¿â£¿â£§â£€â¡€â ‰â ‰â ›â ›â£¿â ¿â ·â šâ ›â ‹â¢«â ‰â €â €â €â£¿â €â €â¢¸â£¿â¡Ÿâ£‡â¡‡â €â €â¢¸â €â €â €â ˆâ¢‰â¡Ÿâ ›â ›â ¾â ¿â¢¿â¡Ÿâ ›â ‰â ‰â â£€â£´â£¿â¡¿â ¿â ›â ‹â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ â €â €â €â¢¸â ƒâ €â €â£„â¡€â €â£Ÿâ ³â£„â €â €â ˜â ·â¢¤â£¼â ¿â €â ¹â£·â£¤â ¶â ‹â €â €â£ â¡´â¢»â¡‡â €â£€â¡„â €â ˆâ£‡â €â €â €â €â ‰â â£€â£„â£€â£€â£€â¡€â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢ â£¿â¡„â €â €â ˆâ ™â¢§â ™â¢¦â£Œâ¡™â ¶â¢¤â£€â¡€â €â €â €â €â €â €â£€â£ â ´â šâ£â¡¤â ¾â£´â¢›â¡‡â €â €â €â£¿â¡†â €â €â €â €â €â¢¿â£¿â£¿â£¿â£¿â¡·â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¸â¢¿â¡»â£„â¡€â €â €â¢¨â£·â¡€â €â ‰â ™â ²â¢¬â£½â£—â£¦â£´â£¶â£â£»â¡¥â ¶â šâ ‰â â¢€â£¼â£§â ˜â €â €â£ â£¾â¡¿â¢¿â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¡¿â ˆâ ›â ®â Ÿâ ’â ’â£¿â¡¿â¡¿â£†â €â €â €â ˜â ¿â¢¿â£¿â ·â¢¿â£¿â Ÿâ €â €â €â €â¢ â£¾â£¿â£¿â¡—â ’â ›â ¯â â â¢¸â¡€â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢°â¡â¡Ÿâ Šâ “â ¦â ¤â¢´â£¿â¡·â£§â ˆâ ³â£„â¡€â €â£´â Ÿâ£¿â¡€â£¼â ™â¢¦â¡€â €â£ â ´â ‹â£¸â¢¿â£¿â£§â ¤â ¤â €â ‰â¢»â¡â¡‡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢¸â ƒâ ·â ¦â ¤â ¤â ¤â£¾â£¿â£‡â£¿â ™â ¶â¢¤â£™â£»â µâ ¶â â ‰â ‰â ¶â ¦â£¿â¢‹â£¡â ´â šâ£½â£¾â£¿â£¿â  â ¤â ¤â ´â ¾â ƒâ¡‡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¸â »â£†â¡€â €â €â €â¡â£¿â¢©â£¿â¡„â €â €â €â¢¹â €â €â£¶â –â£¶â €â €â£¿â €â €â €â¢€â£¿â €â¢¿â£¿â¡„â €â €â¢€â£ â â£§â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¿â£¸â¡€â ‰â ‰â¢»â¢€â£¿â¡¿â¢¦â£¿â ™â¢¦â¡€â €â ˆâ ³â£¤â£¹â£¦â£â£ â¡¶â ƒâ €â¢€â£ â Ÿâ¢¸â£´â¢¿â£¿â¡‡â¢»â ‹â ‰â €â¢€â£½â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢€â¡‡â ˆâ ™â “â ’â ‹â£¸â¢¿â ‡â¢ â£½â ³â ¦â£­â£·â£¶â£¿â¡—â£›â£‹â£¾â¢»â£¦â£¶â£¾â£­â¡¤â –â¢»â¡‡â ˆâ£¿â¢·â ˜â ’â ’â ‹â ‰â¢¹â£†â €â €â €â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¼â¡—â ¶â¢¤â£¤â¡„â£°â£‡â¡¼â£ â£„â£»â£´â£„â£¤â¡¤â ¤â¢”â£›â£â£¿â£â£›â¡³â¢¤â ¤â£¤â£¤â£¦â£¾â£§â£¤â¢¿â£œâ£‡â  â£¤â¡¤â ´â¢ºâ£¿â¡€â €â €â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢°â£¿â¡§â£¤â£¤â €â£°â£â£¼â¡‡â ’â ’â ’â “â ‚â €â ‰â ‰â ‰â ‰â â €â €â ˆâ ‰â ‰â ‰â ›â ›â ›â “â ’â ›â¢ºâ£·â£˜â£§â¡€â£ â£¤â£¤â£¿â£‡â €â €â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¡¿â£¿â €â €â €â ˜â ‹â¢¸â¢¿â¢ƒâ €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ£â£§â ˆâ ›â €â €â €â¢»â£¿â¡„â €â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢°â¢§â¡Ÿâ¢¶â£¤â£€â €â €â¡Ÿâ£¾â£€â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢€â£¿â ¸â¡†â €â¢€â£ â£´â »â¡â£§â €â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¾â ¾â£…â£€â €â ‰â ™â£»â ‡â£¯â£Œâ¡™â ²â¢¤â£„â£€â €â €â €â €â €â €â €â €â €â €â €â €â €â¢€â£€â¡¤â ¶â¢›â£‰â£¼â¡†â£Ÿâ ›â ‰â €â¢€â£ â¡¿â¢¿â¡€â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢ â¡‡â €â €â ˆâ ‰â ›â “â£¿â €â£§â¡€â ˆâ ™â ²â ¦â¢¬â£™â£›â£¶â †â €â €â €â €â €â €â¢â£’â£‹â¡­â ¤â –â ›â ‰â£„â£¸â¡‡â¢¹â –â ›â ‹â ‰â €â €â ˆâ¡‡â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¸â »â¢¦â£€â¢€â£€â£€â£ â¡‡â €â£‡â ™â¢¦â£„â €â €â €â €â €â ‰â â €â ˆâ ‰â ‰â ‰â €â €â €â €â €â €â €â¢€â¡´â Ÿâ¢¹â¡‡â ¸â£¦â£„â£€â¡€â£€â£¤â â£·â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢ â£¿â£¦â£„â£¸â ¹â£‡â£€â£¼â â¡â£Ÿâ ³â¢¤â£ˆâ ›â ¦â£„â¡€â €â €â €â €â €â €â €â €â €â €â €â¢€â£ â¡´â â¢‰â£¤â –â£¿â¢¿â¡„â¢·â£€â£ˆâ¡‡â£¿â£¡â£¤â£¾â¡„â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ£¿â €â ˆâ ‰â €â£¿â¢©â â¢°â£¿â£¿â¡„â €â ˆâ¡›â ²â ¤â£â£“â¡²â ¤â¢¤â£€â£€â£€â£ â ¤â ´â£’â£‹â¡¥â ´â šâ ‰â €â£¼â¡Ÿâ£¸â¡‡â ˜â£â¢¹â ƒâ ‰â ‰â €â¢»â¡‡â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢ â¡Ÿâ “â ¦â¢¤â£€â£»â¡â €â¢¸â£¿â£¿â¢»â£„â¡€â ¹â£†â €â €â ‰â ‰â ›â “â šâ ›â ›â ’â šâ ‰â ‰â €â €â €â ˜â¢€â£´â¡¿â£±â£¿â ‡â €â¢¹â£¾â¢€â£ â ¤â –â ›â£‡â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢€â£Ÿâ ³â ¦â£„â¡€â ˆâ¢»â¡‡â €â €â¢¿â¡¿â£§â¢¹â¡Ÿâ ³â£Œâ €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£ â¡´â¢‹â¡Ÿâ£±â¢¿â£¿â €â €â¢¸â¡Ÿâ ‰â¢€â£€â¡¤â â¢»â¡†â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¡¾â£»â €â €â €â ‰â ³â£¦â¡‡â €â €â¢¸â¡‡â ˜â¢¿â£¿â£—â ®â£—â£€â¡€â €â£ â£€â£€â €â£€â£€â£€â €â €â£€â£¼â¡¿â¢–â£¿â¡—â ‹â¢¸â¡‡â €â €â¢¸â£§â¡â ‹â â €â €â£¿â¢»â¡€â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¸â ƒâ »â£¤â£€â €â €â €â¢¸â¡‡â €â €â¢¸â¢·â£„â¡€â¢»â£¹â£·â£¼â£¯â£¹â£½â¡Ÿâ â ‰â ‰â ‰â ¡â¢‰â£¯â£­â£¥â£¤â£¾â£¿â£¾â â£â¡¼â¢·â €â €â ˜â£¿â €â €â €â¢€â£ â¡¾â €â£·â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢ â¡Ÿâ¢³â£¤â£€â ‰â ‰â ™â ›â¢»â¡‡â €â €â¢¸â €â ˆâ ‰â ›â¢·â¡¿â£¿â£Ÿâ ›â ›â¢§â¡€â €â €â¢€â£¤â£¼â ›â ›â£›â£¿â£½â£¶â Ÿâ ‹â ‰â €â¢¸â €â €â €â£¿â ›â ‹â ‰â ‰â¢â£ â¡´â¢›â¡‡â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢¸â£¿â¡„â €â ‰â ‰â ›â ’â ’â£¾â¡‡â €â €â¢¸â €â €â €â €â €â ‰â €â ˆâ ™â ·â ¾â£¿â£¶â ›â ³â¡¾â ·â –â ‹â â €â ˆâ ‰â €â €â €â €â¢¸â €â €â €â£¿â¡’â šâ ›â ‹â ‰â â €â£¾â£·â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ¸â£¯â¡·â£„â¡€â €â¢€â£¤â¡¶â£¿â ƒâ €â €â£¿â €â €â €â €â €â €â €â €â €â €â €â£ â¡‡â €â¢ â£§â €â €â €â €â €â €â €â €â €â €â €â¢¸â €â €â €â¢¿â ·â¢¤â£„â €â €â£ â£¼â£¥â¡Ÿâ €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢€â£¿â£§â¡ˆâ£»â ·â¢¶â¡¶â£·â¡Ÿâ €â €â €â£¾â¢¦â£€â¡€â €â €â €â €â¢€â£€â£ â¡´â¢»â ƒâ €â €â£â ³â£¤â£€â¡€â €â €â €â €â €â£€â£ â¢¾â €â €â €â ˜â£Ÿâ ³â£¾â ¶â£¿â ‰â£¸â£¿â¡„â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ˜â¡Ÿâ£¿â£¿â£¿â£¸â£¿â£´â Ÿâ â €â €â €â£¿â¡²â ¦â¢­â£â£›â£»â¡¯â ½â Ÿâ ‰â£ â¡¾â €â €â €â¢»â£¤â¡Œâ ›â ¯â ¿â£›â£›â£»â£¯â ­â¢¶â£¿â¡‡â €â €â €â ˜â ¦â£½â£†â£¸â£¶â£¿â£§â¡‡â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ¹â£¿â£¿â£¿â ‡â €â €â €â €â €â €â €â£‡â €â €â ‰â ™â ›â ‰â ‰â ›â ›â ›â¢‰â¡‡â €â €â €â¢˜â¡â ™â ›â ›â ‹â ‰â ›â ‹â €â €â €â¢ˆâ¡‡â €â €â €â €â €â €â €â¢¿â£¯â£¿â¡Ÿâ â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢°â£¯â¡‰â “â ’â ²â ¶â ¶â ¶â ¶â¢¶â£¶â£¾â¡‡â €â €â €â¢¸â£¿â¢¶â¡¶â ¶â ¶â ¶â ¶â ’â ’â šâ ‹â£¹â¡‡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢¸â¡‡â ‰â “â ’â ’â ’â ’â ’â šâ ‰â¢â£¿â¡‡â €â €â €â €â£¿â¡„â ‰â ›â ’â ’â ’â ’â ’â ’â ‹â ‰â¡‡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
    â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢¸â¡Ÿâ ²â ¦â ¤â ¤â ¤â ¤â ¤â ´â ¶â£¿â£¿â â €â €â €â €â¢¿â¢»â¡·â ¶â ¤â ¤â ¤â ¤â ¤â ¤â –â šâ¡‡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €ğŸ™â™¡â€¹ğŸ¹ãŠ—ğŸ§

    """
    VALID_COLORS = ['blue', 'red', 'green']
    COMMANDS = {
        'help': show_help,
        'goodbye': exit_chat,
        'history': show_history,
        # Add more commands here
    }


    def handle_exception(self, e):
        error_type = type(e).__name__
        if error_type in self.custom_error_messages:
            message = random.choice(self.custom_error_messages[error_type])
        else:
            message = f"Unexpected Error: {e}"
        self.simulate_typing(colored(message, "red"))


    def show_tutorial(self):
        tutorial_text = """
        Welcome to the tutorial!
        - 'help': Show help menu
        - 'goodbye', 'quit', 'exit': Exit the chat
        - 'history': Show chat history
        """
        self.simulate_typing(colored(tutorial_text, "yellow"))
        
    
    user_text_color = None
    available_colors = ['red', 'green', 'yellow', 'blue', 'magenta', 'cyan', 'white']
    @classmethod
    def get_text_color(cls):
        if cls.user_text_color:
            return cls.user_text_color
        current_hour = datetime.now().hour
        if 6 <= current_hour < 18:
            return 'blue'
        else:
            return 'white'
        
    def change_text_color(self, new_color):
        self.text_color = new_color
    
    
    
    
    



